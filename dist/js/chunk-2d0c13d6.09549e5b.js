(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c13d6"],{"44cc":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("main",{staticClass:"container my-5"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),t._m(0),a("div",{staticClass:"input-group input-group-lg mb-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode},on:{input:function(s){s.target.composing||(t.couponCode=s.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return t.addCoupon()}}},[t._v("套用優惠碼")])])]),a("div",{staticClass:"text-danger mb-4"},[t._v("全館年終大優惠，輸入999，商品一律打9折")]),t.ordersLen>0?a("div",[a("table",{staticClass:"table mt-3"},[t._m(1),a("tbody",t._l(t.orders.carts,(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn text-danger btn-lg",attrs:{type:"button",disabled:t.isDisabled===s.id},on:{click:function(a){return t.removeCart(s.id)}}},[t.filterLoadingItem===s.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):a("i",{staticClass:"far fa-trash-alt"})])]),a("td",[a("img",{staticClass:"img-fluid",attrs:{src:s.product.imageUrl,alt:""}})]),a("td",{staticClass:"align-middle"},[a("router-link",{attrs:{to:"/customer_product/"+s.product.id}},[t._v(t._s(s.product.title))]),s.coupon?a("div",{staticClass:"text-info"},[a("small",[t._v("已套用優惠券")])]):t._e()],1),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(s.qty)+"件")]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(s.final_total)))])])})),0),a("tfoot",[a("tr",[t._m(2),a("td",{staticClass:"text-right h5"},[t.orders.final_total!==t.orders.total?a("del",[t._v("NT "+t._s(t._f("currency")(t.orders.total)))]):a("strong",[t._v("NT "+t._s(t._f("currency")(t.orders.total)))])])]),t.orders.final_total!==t.orders.total?a("tr",[t._m(3),a("td",{staticClass:"text-right text-danger h4"},[a("strong",[t._v("NT "+t._s(t._f("currency")(t.orders.final_total)))])])]):t._e()])]),a("div",{staticClass:"text-right d-flex mt-5"},[a("router-link",{staticClass:"btn btn-lg btn-secondary mr-auto",attrs:{to:"/customer_products"}},[t._v("上一步：繼續購物")]),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(s){return t.goOrder()}}},[t._v("下一步：填寫資料")])],1)]):a("div",{staticClass:"text-center"},[a("p",{staticClass:"h5 mb-4"},[t._v("哎呀！購物車被清光了！要回去購物嗎？")]),a("router-link",{staticClass:"btn btn-lg btn-primary",attrs:{to:"/customer_products"}},[a("i",{staticClass:"fas fa-angle-right"}),t._v("\n      回購物商城\n      "),a("i",{staticClass:"fas fa-angle-left"})])],1)],1)},i=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"form-row my-5"},[a("div",{staticClass:"col-sm"},[a("div",{staticClass:"alert alert-success text-center"},[a("p",{staticClass:"h3 font-weight-bold"},[t._v("STEP 1")]),t._v("確認購物清單\n      ")])]),a("div",{staticClass:"col-sm"},[a("div",{staticClass:"alert alert-light text-center"},[a("p",{staticClass:"h3 font-weight-bold"},[t._v("STEP 2")]),t._v("填寫訂單資料\n      ")])]),a("div",{staticClass:"col-sm"},[a("div",{staticClass:"alert alert-light text-center"},[a("p",{staticClass:"h3 font-weight-bold"},[t._v("STEP 3")]),t._v("完成訂單！\n      ")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",{staticClass:"alert-light"},[a("th",{attrs:{width:"50"}}),a("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("圖片")]),a("th",[t._v("商品名稱")]),a("th",{staticClass:"text-right",attrs:{width:"100"}},[t._v("數量")]),a("th",{staticClass:"text-right",attrs:{width:"180"}},[t._v("小計")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("td",{staticClass:"text-right",attrs:{colspan:"4"}},[a("strong",[t._v("總計")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("td",{staticClass:"text-right text-danger h5",attrs:{colspan:"4"}},[a("strong",[t._v("折扣價")])])}],r={data:function(){return{orders:{},ordersLen:0,couponCode:"",isLoading:!1,filterLoadingItem:"",isDisabled:""}},methods:{getOrders:function(){var t=this;t.isLoading=!0;var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("dress_store","/cart");t.$http.get(s).then((function(s){console.log("確認購物清單-取得訂單",s.data),s.data.success&&(t.orders=s.data.data,t.ordersLen=s.data.data.carts.length,t.isLoading=!1)}))},removeCart:function(t){var s=this,a=this;a.filterLoadingItem=t,a.isDisabled=t;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("dress_store","/cart/").concat(t);a.$http.delete(e).then((function(t){console.log("確認購物清單-刪除購物車",t.data),t.data.success&&(a.$bus.$emit("messsage:push",t.data.message,"success"),a.getOrders(),s.$bus.$emit("cartsQty:update"),a.filterLoadingItem="",a.isDisabled="")}))},addCoupon:function(){var t=this,s=this,a={code:s.couponCode},e="".concat("https://vue-course-api.hexschool.io","/api/").concat("dress_store","/coupon");s.$http.post(e,{data:a}).then((function(s){console.log("確認購物清單-套用優惠券",s.data),s.data.success?(t.$bus.$emit("messsage:push",s.data.message,"success"),t.getOrders(),t.couponCode=""):t.$bus.$emit("messsage:push",s.data.message,"danger")}))},goOrder:function(){this.$router.push("/customer_order"),window.scroll(0,0)}},created:function(){this.getOrders()}},o=r,n=a("2877"),c=Object(n["a"])(o,e,i,!1,null,null,null);s["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0c13d6.09549e5b.js.map