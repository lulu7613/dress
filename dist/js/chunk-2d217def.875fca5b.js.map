{"version":3,"sources":["webpack:///./src/views/CustomerProduct.vue?3a71","webpack:///src/views/CustomerProduct.vue","webpack:///./src/views/CustomerProduct.vue?a359","webpack:///./src/views/CustomerProduct.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","staticClass","tempProduct","imageUrl","_v","_s","title","myFavorite","find","obj","id","staticStyle","preventDefault","removeFavorite","addFavorite","category","_e","content","origin_price","price","directives","name","rawName","value","expression","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","$set","multiple","_l","num","key","domProps","unit","isDisabled","addCart","filterLoadingItem","_f","sameCategoryProducts","changeProduct","getFavorite","staticRenderFns","components","Breadcrumb","ProductTemplate","data","itemId","products","JSON","parse","localStorage","getItem","methods","getProducts","vm","$route","params","axios","get","api","then","console","log","response","success","forEach","item","push","isFavorite","qty","$http","post","$bus","$emit","message","setItem","stringify","splice","index","created","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,MAAM,CAAC,OAASN,EAAIO,WAAWC,GAAG,CAAC,gBAAgB,SAASC,GAAQT,EAAIO,UAAUE,MAAWL,EAAG,aAAa,CAACM,YAAY,iBAAiBJ,MAAM,CAAC,UAAYN,EAAIW,eAAeP,EAAG,OAAO,CAACM,YAAY,uBAAuB,CAACN,EAAG,MAAM,CAACM,YAAY,oBAAoBJ,MAAM,CAAC,GAAK,iBAAiB,CAACF,EAAG,MAAM,CAACM,YAAY,yCAAyC,CAACN,EAAG,MAAM,CAACM,YAAY,YAAYJ,MAAM,CAAC,IAAMN,EAAIW,YAAYC,SAAS,IAAM,kBAAkBR,EAAG,MAAM,CAACM,YAAY,gBAAgBJ,MAAM,CAAC,GAAK,yBAAyB,CAACF,EAAG,MAAM,CAACM,YAAY,+BAA+B,CAACN,EAAG,KAAK,CAACM,YAAY,8BAA8B,CAACV,EAAIa,GAAGb,EAAIc,GAAGd,EAAIW,YAAYI,UAAWf,EAAIgB,WAAWC,MAAK,SAAUC,GAAO,OAAOA,EAAIC,KAAOnB,EAAIW,YAAYQ,MAAQf,EAAG,OAAO,CAACM,YAAY,YAAYU,YAAY,CAAC,YAAY,SAAS,OAAS,WAAWZ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOY,iBAAwBrB,EAAIsB,oBAAoB,CAAClB,EAAG,IAAI,CAACM,YAAY,iBAAiBV,EAAIa,GAAG,qCAAqCT,EAAG,OAAO,CAACM,YAAY,eAAeU,YAAY,CAAC,YAAY,SAAS,OAAS,WAAWZ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOY,iBAAwBrB,EAAIuB,iBAAiB,CAACnB,EAAG,IAAI,CAACM,YAAY,iBAAiBV,EAAIa,GAAG,sCAAoE,SAA7Bb,EAAIW,YAAYa,SAAqBpB,EAAG,OAAO,CAACM,YAAY,8BAA8B,CAACV,EAAIa,GAAGb,EAAIc,GAAGd,EAAIW,YAAYa,aAAaxB,EAAIyB,KAAmC,SAA7BzB,EAAIW,YAAYa,SAAqBpB,EAAG,OAAO,CAACM,YAAY,4BAA4B,CAACV,EAAIa,GAAGb,EAAIc,GAAGd,EAAIW,YAAYa,aAAaxB,EAAIyB,KAAmC,UAA7BzB,EAAIW,YAAYa,SAAsBpB,EAAG,OAAO,CAACM,YAAY,4BAA4B,CAACV,EAAIa,GAAGb,EAAIc,GAAGd,EAAIW,YAAYa,aAAaxB,EAAIyB,KAAKrB,EAAG,IAAI,CAACJ,EAAIa,GAAGb,EAAIc,GAAGd,EAAIW,YAAYe,YAAYtB,EAAG,MAAM,CAACM,YAAY,8CAA8C,CAACN,EAAG,MAAM,CAAEJ,EAAIW,YAAYgB,eAAiB3B,EAAIW,YAAYgB,aAAcvB,EAAG,MAAM,CAACM,YAAY,MAAM,CAACV,EAAIa,GAAG,UAAUb,EAAIc,GAAGd,EAAIW,YAAYgB,iBAAiB3B,EAAIyB,OAAQzB,EAAIW,YAAYgB,eAAiB3B,EAAIW,YAAYgB,aAAcvB,EAAG,MAAM,CAACM,YAAY,0BAA0B,CAACN,EAAG,QAAQ,CAACM,YAAY,oBAAoB,CAACV,EAAIa,GAAG,YAAYT,EAAG,SAAS,CAACJ,EAAIa,GAAGb,EAAIc,GAAGd,EAAIW,YAAYiB,YAAY5B,EAAIyB,KAAMzB,EAAIW,YAAYgB,eAAiB3B,EAAIW,YAAYgB,aAAcvB,EAAG,MAAM,CAACM,YAAY,0BAA0B,CAACN,EAAG,QAAQ,CAACM,YAAY,oBAAoB,CAACV,EAAIa,GAAG,YAAYT,EAAG,SAAS,CAACJ,EAAIa,GAAGb,EAAIc,GAAGd,EAAIW,YAAYgB,mBAAmB3B,EAAIyB,OAAOrB,EAAG,MAAMA,EAAG,MAAM,CAACM,YAAY,oBAAoB,CAACN,EAAG,SAAS,CAACyB,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOhC,EAAIW,YAAe,IAAEsB,WAAW,oBAAoBvB,YAAY,oBAAoBF,GAAG,CAAC,OAAS,SAASC,GAAQ,IAAIyB,EAAgBC,MAAMC,UAAUC,OAAOC,KAAK7B,EAAO8B,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,YAAWC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAET,MAAM,OAAOY,KAAO5C,EAAI8C,KAAK9C,EAAIW,YAAa,MAAOF,EAAO8B,OAAOQ,SAAWb,EAAgBA,EAAc,OAAOlC,EAAIgD,GAAG,IAAK,SAASC,GAAK,OAAO7C,EAAG,SAAS,CAAC8C,IAAID,EAAIE,SAAS,CAAC,MAAQF,IAAM,CAACjD,EAAIa,GAAG,MAAMb,EAAIc,GAAGmC,GAAK,IAAIjD,EAAIc,GAAGd,EAAIW,YAAYyC,YAAW,GAAGhD,EAAG,SAAS,CAACM,YAAY,kBAAkBJ,MAAM,CAAC,SAAWN,EAAIqD,aAAerD,EAAIW,YAAYQ,IAAIX,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIsD,QAAQtD,EAAIW,YAAYQ,GAAInB,EAAIW,YAAYsC,QAAQ,CAAEjD,EAAIuD,oBAAsBvD,EAAIW,YAAYQ,GAAIf,EAAG,IAAI,CAACM,YAAY,2BAA2BV,EAAIyB,KAAKzB,EAAIa,GAAG,uCAAwCb,EAAIW,YAAYsC,IAAK,EAAG7C,EAAG,MAAM,CAACM,YAAY,0CAA0C,CAACV,EAAIa,GAAG,8BAA+Bb,EAAIW,YAAYiB,MAAQ,EAAGxB,EAAG,SAAS,CAACJ,EAAIa,GAAGb,EAAIc,GAAGd,EAAIwD,GAAG,WAAPxD,CAAmBA,EAAIW,YAAYsC,IAAMjD,EAAIW,YAAYiB,QAAQ,OAAOxB,EAAG,SAAS,CAACJ,EAAIa,GAAGb,EAAIc,GAAGd,EAAIwD,GAAG,WAAPxD,CAAmBA,EAAIW,YAAYsC,IAAMjD,EAAIW,YAAYgB,eAAe,SAAS3B,EAAIyB,SAASrB,EAAG,KAAK,CAACM,YAAY,aAAa,CAACV,EAAIa,GAAG,YAAYT,EAAG,kBAAkB,CAACE,MAAM,CAAC,UAAYN,EAAIyD,qBAAqB,cAAgBzD,EAAIgB,YAAYR,GAAG,CAAC,KAAOR,EAAI0D,cAAc,eAAiB1D,EAAI2D,gBAAgB,IAAI,IACrlIC,EAAkB,G,oCCsGtB,GACEC,WAAY,CACVC,WAAJ,OACIC,gBAAJ,QAGEC,KANF,WAOI,MAAO,CACLC,OAAQ,GACRC,SAAU,GACVT,qBAAsB,GACtB9C,YAAa,GACb0C,WAAY,GAEZrC,WAAYmD,KAAKC,MAAMC,aAAaC,QAAQ,qBAAuB,GAEnEf,kBAAmB,GACnBhD,WAAW,IAIfgE,QAAS,CAEPC,YAFJ,WAGM,IAAN,OACMC,EAAGlE,WAAY,EACfkE,EAAGR,OAASQ,EAAGC,OAAOC,OAAOxD,GAC7B,IAAN,iGACMsD,EAAGG,MAAMC,IAAIC,GAAKC,MAAK,SAA7B,GACQC,QAAQC,IAAI,SAAUC,EAASlB,MAC3BkB,EAASlB,KAAKmB,UAChBV,EAAGP,SAAWgB,EAASlB,KAAKE,SAG5BO,EAAGP,SAASkB,SAAQ,SAA9B,GACgBC,EAAKlE,KAAOsD,EAAGR,SACjBQ,EAAG9D,YAAc0E,EACjBZ,EAAG9D,YAAYsC,IAAM,MAIzBwB,EAAGP,SAASkB,SAAQ,SAA9B,GACgBC,EAAKlE,KAAOsD,EAAG9D,YAAYQ,IAAMkE,EAAK7D,WAAaiD,EAAG9D,YAAYa,UACpEiD,EAAGhB,qBAAqB6B,KAAKD,MAIjCZ,EAAGzD,WAAamD,KAAKC,MAAMC,aAAaC,QAAQ,qBAAuB,GACvEG,EAAGzD,WAAWoE,SAAQ,SAAhC,GACgBC,EAAKlE,KAAOsD,EAAGR,OACjBQ,EAAGc,YAAa,EAEhBd,EAAGc,YAAa,KAGpBd,EAAGlE,WAAY,OAMrBmD,cAxCJ,SAwCA,GACM,IAAN,OACMe,EAAGR,OAAS9C,EACZsD,EAAGhB,qBAAuB,GAC1BgB,EAAG9D,YAAc,GAGjB8D,EAAGP,SAASkB,SAAQ,SAA1B,GACYC,EAAKlE,KAAOsD,EAAGR,SACjBQ,EAAG9D,YAAc0E,EACjBZ,EAAG9D,YAAYsC,IAAM,MAIzBwB,EAAGP,SAASkB,SAAQ,SAA1B,GACYC,EAAKlE,KAAOsD,EAAG9D,YAAYQ,IAAMkE,EAAK7D,WAAaiD,EAAG9D,YAAYa,UACpEiD,EAAGhB,qBAAqB6B,KAAKD,OAMnC/B,QA9DJ,SA8DA,kEACA,OACMmB,EAAGlB,kBAAoBpC,EACvBsD,EAAGpB,WAAalC,EAChB,IAAN,GACQ,WAAcA,EACd,IAAOqE,GAEf,yFACMf,EAAGgB,MAAMC,KAAKZ,EAAK,CAAzB,2BACQE,QAAQC,IAAI,cAAeC,EAASlB,MAChCkB,EAASlB,KAAKmB,UAChBV,EAAGlB,kBAAoB,GACvBkB,EAAGpB,WAAa,GAChBoB,EAAGkB,KAAKC,MAAM,gBAAiBV,EAASlB,KAAK6B,QAAS,WACtDpB,EAAGkB,KAAKC,MAAM,wBAMpBrE,YAnFJ,WAoFM,IAAN,OACMkD,EAAGzD,WAAWsE,KAAKb,EAAG9D,aACtB8D,EAAGkB,KAAKC,MAAM,gBAAiB,aAAc,WAC7CvB,aAAayB,QAAQ,kBAAmB3B,KAAK4B,UAAUtB,EAAGzD,cAI5DM,eA3FJ,WA4FM,IAAN,OACMmD,EAAGzD,WAAWqB,QAAO,SAA3B,KACQ,GAAIgD,EAAKlE,KAAOsD,EAAGR,OACjB,OAAOQ,EAAGzD,WAAWgF,OAAOC,EAAO,MAGvCxB,EAAGkB,KAAKC,MAAM,gBAAiB,aAAc,UAC7CvB,aAAayB,QAAQ,kBAAmB3B,KAAK4B,UAAUtB,EAAGzD,cAI5D2C,YAvGJ,WAwGM,IAAN,OACMc,EAAGzD,WAAamD,KAAKC,MAAMC,aAAaC,QAAQ,qBAAuB,KAI3E4B,QAlIF,WAmIIjG,KAAKuE,gBC1OgV,I,YCOrV2B,EAAY,eACd,EACApG,EACA6D,GACA,EACA,KACA,KACA,MAIa,aAAAuC,E","file":"js/chunk-2d217def.875fca5b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('Breadcrumb',{staticClass:\"container mt-3\",attrs:{\"propsData\":_vm.tempProduct}}),_c('main',{staticClass:\"container my-5 main\"},[_c('div',{staticClass:\"row border-bottom\",attrs:{\"id\":\"product-main\"}},[_c('div',{staticClass:\"col-lg-6 text-center product-img mb-5\"},[_c('img',{staticClass:\"img-fluid\",attrs:{\"src\":_vm.tempProduct.imageUrl,\"alt\":\"1101al.jpg\"}})]),_c('div',{staticClass:\"col-lg-5 mb-5\",attrs:{\"id\":\"product-content-main\"}},[_c('div',{staticClass:\"d-flex align-items-baseline\"},[_c('h1',{staticClass:\"h3 font-weight-bolder mr-3\"},[_vm._v(_vm._s(_vm.tempProduct.title))]),(_vm.myFavorite.find(function (obj) { return obj.id === _vm.tempProduct.id; }))?_c('span',{staticClass:\"text-info\",staticStyle:{\"font-size\":\"1.1rem\",\"cursor\":\"pointer\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeFavorite()}}},[_c('i',{staticClass:\"fas fa-heart\"}),_vm._v(\"\\n            已加入最愛\\n          \")]):_c('span',{staticClass:\"text-primary\",staticStyle:{\"font-size\":\"1.1rem\",\"cursor\":\"pointer\"},on:{\"click\":function($event){$event.preventDefault();return _vm.addFavorite()}}},[_c('i',{staticClass:\"far fa-heart\"}),_vm._v(\"\\n            加入最愛\\n          \")])]),(_vm.tempProduct.category === '主題商品')?_c('span',{staticClass:\"badge badge-secondary mb-2\"},[_vm._v(_vm._s(_vm.tempProduct.category))]):_vm._e(),(_vm.tempProduct.category === '人氣精選')?_c('span',{staticClass:\"badge badge-warning mb-2\"},[_vm._v(_vm._s(_vm.tempProduct.category))]):_vm._e(),(_vm.tempProduct.category === '清倉55折')?_c('span',{staticClass:\"badge badge-success mb-2\"},[_vm._v(_vm._s(_vm.tempProduct.category))]):_vm._e(),_c('p',[_vm._v(_vm._s(_vm.tempProduct.content))]),_c('div',{staticClass:\"d-flex justify-content-end align-items-end\"},[_c('del',[(_vm.tempProduct.origin_price !== _vm.tempProduct.origin_price)?_c('div',{staticClass:\"h5\"},[_vm._v(\"原價 NT$ \"+_vm._s(_vm.tempProduct.origin_price))]):_vm._e()]),(_vm.tempProduct.origin_price !== _vm.tempProduct.origin_price)?_c('div',{staticClass:\"h3 ml-auto text-danger\"},[_c('small',{staticClass:\"font-weight-bold\"},[_vm._v(\"特價 NT$\")]),_c('strong',[_vm._v(_vm._s(_vm.tempProduct.price))])]):_vm._e(),(_vm.tempProduct.origin_price === _vm.tempProduct.origin_price)?_c('div',{staticClass:\"h3 ml-auto text-danger\"},[_c('small',{staticClass:\"font-weight-bold\"},[_vm._v(\"售價 $NT\")]),_c('strong',[_vm._v(_vm._s(_vm.tempProduct.origin_price))])]):_vm._e()]),_c('hr'),_c('div',{staticClass:\"input-group mt-3\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempProduct.num),expression:\"tempProduct.num\"}],staticClass:\"form-control mr-3\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.tempProduct, \"num\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((10),function(num){return _c('option',{key:num,domProps:{\"value\":num}},[_vm._v(\"選購 \"+_vm._s(num)+\" \"+_vm._s(_vm.tempProduct.unit))])}),0),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"disabled\":_vm.isDisabled === _vm.tempProduct.id},on:{\"click\":function($event){return _vm.addCart(_vm.tempProduct.id, _vm.tempProduct.num)}}},[(_vm.filterLoadingItem === _vm.tempProduct.id)?_c('i',{staticClass:\"fas fa-spinner fa-spin\"}):_vm._e(),_vm._v(\"\\n            加入購物車\\n          \")])]),(_vm.tempProduct.num >1)?_c('div',{staticClass:\"text-muted text-right text-nowrap mt-3\"},[_vm._v(\"\\n          小計\\n          \"),(_vm.tempProduct.price > 0)?_c('strong',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.tempProduct.num * _vm.tempProduct.price))+\"元\")]):_c('strong',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.tempProduct.num * _vm.tempProduct.origin_price))+\"元\")])]):_vm._e()])]),_c('h6',{staticClass:\"my-3 pl-4\"},[_vm._v(\"其他同款商品\")]),_c('ProductTemplate',{attrs:{\"propsData\":_vm.sameCategoryProducts,\"propsFavorite\":_vm.myFavorite},on:{\"emit\":_vm.changeProduct,\"emitFavoriteId\":_vm.getFavorite}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <loading :active.sync=\"isLoading\"></loading>\r\n    <!-- 麵包屑分頁 -->\r\n    <Breadcrumb class=\"container mt-3\" :propsData=\"tempProduct\" />\r\n    <main class=\"container my-5 main\">\r\n      <!-- product 主要商品展示 -->\r\n      <div class=\"row border-bottom\" id=\"product-main\">\r\n        <div class=\"col-lg-6 text-center product-img mb-5\">\r\n          <img :src=\"tempProduct.imageUrl\" alt=\"1101al.jpg\" class=\"img-fluid\" />\r\n        </div>\r\n        <div class=\"col-lg-5 mb-5\" id=\"product-content-main\">\r\n          <div class=\"d-flex align-items-baseline\">\r\n            <h1 class=\"h3 font-weight-bolder mr-3\">{{ tempProduct.title }}</h1>\r\n            <span\r\n              class=\"text-info\"\r\n              style=\"font-size: 1.1rem; cursor: pointer;\"\r\n              v-if=\"myFavorite.find(obj => obj.id === tempProduct.id)\"\r\n              @click.prevent=\"removeFavorite()\"\r\n            >\r\n              <i class=\"fas fa-heart\"></i>\r\n              已加入最愛\r\n            </span>\r\n            <span\r\n              class=\"text-primary\"\r\n              style=\"font-size: 1.1rem; cursor: pointer;\"\r\n              v-else\r\n              @click.prevent=\"addFavorite()\"\r\n            >\r\n              <i class=\"far fa-heart\"></i>\r\n              加入最愛\r\n            </span>\r\n          </div>\r\n          <span\r\n            class=\"badge badge-secondary mb-2\"\r\n            v-if=\"tempProduct.category === '主題商品'\"\r\n          >{{ tempProduct.category }}</span>\r\n          <span\r\n            class=\"badge badge-warning mb-2\"\r\n            v-if=\"tempProduct.category === '人氣精選'\"\r\n          >{{ tempProduct.category }}</span>\r\n          <span\r\n            class=\"badge badge-success mb-2\"\r\n            v-if=\"tempProduct.category === '清倉55折'\"\r\n          >{{ tempProduct.category }}</span>\r\n          <p>{{tempProduct.content}}</p>\r\n          <div class=\"d-flex justify-content-end align-items-end\">\r\n            <del>\r\n              <div\r\n                class=\"h5\"\r\n                v-if=\"tempProduct.origin_price !== tempProduct.origin_price\"\r\n              >原價 NT$ {{tempProduct.origin_price}}</div>\r\n            </del>\r\n            <div class=\"h3 ml-auto text-danger\" v-if=\"tempProduct.origin_price !== tempProduct.origin_price\">\r\n              <small class=\"font-weight-bold\">特價 NT$</small>\r\n              <strong>{{ tempProduct.price }}</strong>\r\n            </div>\r\n            <div class=\"h3 ml-auto text-danger\" v-if=\"tempProduct.origin_price === tempProduct.origin_price\">\r\n              <small class=\"font-weight-bold\">售價 $NT</small>\r\n              <strong>{{tempProduct.origin_price}}</strong>\r\n            </div>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <div class=\"input-group mt-3\">\r\n            <select class=\"form-control mr-3\" v-model=\"tempProduct.num\">\r\n              <option :value=\"num\" v-for=\"num in 10\" :key=\"num\">選購 {{num}} {{tempProduct.unit}}</option>\r\n            </select>\r\n            <button\r\n              class=\"btn btn-primary\"\r\n              :disabled=\"isDisabled === tempProduct.id\"\r\n              @click=\"addCart(tempProduct.id, tempProduct.num)\"\r\n            >\r\n              <i class=\"fas fa-spinner fa-spin\" v-if=\"filterLoadingItem === tempProduct.id\"></i>\r\n              加入購物車\r\n            </button>\r\n          </div>\r\n          <div class=\"text-muted text-right text-nowrap mt-3\" v-if=\"tempProduct.num >1\">\r\n            小計\r\n            <strong\r\n              v-if=\"tempProduct.price > 0\"\r\n            >{{ tempProduct.num * tempProduct.price | currency }}元</strong>\r\n            <strong v-else>{{ tempProduct.num * tempProduct.origin_price | currency }}元</strong>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 同類型產品 -->\r\n      <h6 class=\"my-3 pl-4\">其他同款商品</h6>\r\n      <ProductTemplate\r\n        :propsData=\"sameCategoryProducts\"\r\n        :propsFavorite=\"myFavorite\"\r\n        @emit=\"changeProduct\"\r\n        @emitFavoriteId=\"getFavorite\"\r\n      />\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Breadcrumb from '../components/Breadcrumb.vue'\r\nimport ProductTemplate from '../components/ProductTemplate.vue'\r\n\r\nexport default {\r\n  components: {\r\n    Breadcrumb,\r\n    ProductTemplate\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      itemId: '',\r\n      products: [],\r\n      sameCategoryProducts: [],\r\n      tempProduct: {},\r\n      isDisabled: '',\r\n\r\n      myFavorite: JSON.parse(localStorage.getItem('dressMyFavorite')) || [],\r\n\r\n      filterLoadingItem: '',\r\n      isLoading: false\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // 取得商品列表\r\n    getProducts () {\r\n      const vm = this\r\n      vm.isLoading = true\r\n      vm.itemId = vm.$route.params.id\r\n      const api = `${process.env.VUE_APP_PATH}/api/${process.env.VUE_APP_ADMIN}/products/all`\r\n      vm.axios.get(api).then((response) => {\r\n        console.log('取得商品列表', response.data)\r\n        if (response.data.success) {\r\n          vm.products = response.data.products\r\n          // 搜尋:\r\n          // 1.相同 Category 商品\r\n          vm.products.forEach((item) => {\r\n            if (item.id === vm.itemId) {\r\n              vm.tempProduct = item\r\n              vm.tempProduct.num = 1\r\n            }\r\n          })\r\n          // 2.相同 id 的商品 (不包括 tempProduct 本身)\r\n          vm.products.forEach((item) => {\r\n            if (item.id !== vm.tempProduct.id && item.category === vm.tempProduct.category) {\r\n              vm.sameCategoryProducts.push(item)\r\n            }\r\n          })\r\n          // localStorage 判斷是否為我的最愛\r\n          vm.myFavorite = JSON.parse(localStorage.getItem('dressMyFavorite')) || []\r\n          vm.myFavorite.forEach(item => {\r\n            if (item.id === vm.itemId) {\r\n              vm.isFavorite = true\r\n            } else {\r\n              vm.isFavorite = false\r\n            }\r\n          })\r\n          vm.isLoading = false\r\n        }\r\n      })\r\n    },\r\n\r\n    // 更換產品\r\n    changeProduct (id) {\r\n      const vm = this\r\n      vm.itemId = id\r\n      vm.sameCategoryProducts = []\r\n      vm.tempProduct = {}\r\n      // 搜尋:\r\n      // 1.相同 Category 商品\r\n      vm.products.forEach((item) => {\r\n        if (item.id === vm.itemId) {\r\n          vm.tempProduct = item\r\n          vm.tempProduct.num = 1\r\n        }\r\n      })\r\n      // 2.相同 id 的商品 (不包括 tempProduct 本身)\r\n      vm.products.forEach((item) => {\r\n        if (item.id !== vm.tempProduct.id && item.category === vm.tempProduct.category) {\r\n          vm.sameCategoryProducts.push(item)\r\n        }\r\n      })\r\n    },\r\n\r\n    // 加入購物車 (qty 為 1) /api/:api_path/cart\r\n    addCart (id, qty = 1) {\r\n      const vm = this\r\n      vm.filterLoadingItem = id\r\n      vm.isDisabled = id\r\n      const postData = {\r\n        'product_id': id,\r\n        'qty': qty\r\n      }\r\n      const api = `${process.env.VUE_APP_PATH}/api/${process.env.VUE_APP_ADMIN}/cart`\r\n      vm.$http.post(api, { data: postData }).then((response) => {\r\n        console.log('加入購物車(temp)', response.data)\r\n        if (response.data.success) {\r\n          vm.filterLoadingItem = ''\r\n          vm.isDisabled = ''\r\n          vm.$bus.$emit('messsage:push', response.data.message, 'success')\r\n          vm.$bus.$emit('cartsQty:update')\r\n        }\r\n      })\r\n    },\r\n\r\n    // localStorage 加入我的最愛\r\n    addFavorite () {\r\n      const vm = this\r\n      vm.myFavorite.push(vm.tempProduct)\r\n      vm.$bus.$emit('messsage:push', '商品加入我的最愛囉～', 'success')\r\n      localStorage.setItem('dressMyFavorite', JSON.stringify(vm.myFavorite))\r\n    },\r\n\r\n    // localStorage 移除我的最愛\r\n    removeFavorite () {\r\n      const vm = this\r\n      vm.myFavorite.filter((item, index) => {\r\n        if (item.id === vm.itemId) {\r\n          return vm.myFavorite.splice(index, 1)\r\n        }\r\n      })\r\n      vm.$bus.$emit('messsage:push', '商品從我的最愛移除！', 'danger')\r\n      localStorage.setItem('dressMyFavorite', JSON.stringify(vm.myFavorite))\r\n    },\r\n\r\n    // 獲取 favorite 變化\r\n    getFavorite () {\r\n      const vm = this\r\n      vm.myFavorite = JSON.parse(localStorage.getItem('dressMyFavorite')) || []\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerProduct.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerProduct.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomerProduct.vue?vue&type=template&id=5edaf13b&\"\nimport script from \"./CustomerProduct.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomerProduct.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}