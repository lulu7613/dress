(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d23012c"],{eb70:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"container my-5"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._m(0),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header alert-primary d-flex justify-content-between",attrs:{role:"tab",id:"headingOne"}},[t._m(1),a("div",{staticClass:"align-self-center mb-0 h4 font-weight-bold"},[t.orders.final_total!==t.orders.total?a("span",{staticClass:"h6"},[t._v("( 已折扣 )")]):t._e(),t._v("\n            NT "+t._s(t._f("currency")(t.orders.final_total))+"\n          ")])]),a("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[t._m(2),a("tbody",t._l(t.orders.carts,(function(e){return a("tr",{key:e.id},[a("td",[a("img",{staticClass:"img-fluid",attrs:{src:e.product.imageUrl,alt:""}})]),a("td",{staticClass:"align-middle"},[t._v("\n                    "+t._s(e.product.title)+"\n                    "),e.coupon?a("div",{staticClass:"text-info"},[a("small",[t._v("已套用優惠券")])]):t._e()]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.qty)+"件")]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(e.final_total)))])])})),0),a("tfoot",[a("tr",[t._m(3),a("td",{staticClass:"text-right"},[t.orders.final_total!==t.orders.total?a("del",[t._v("NT "+t._s(t._f("currency")(t.orders.total)))]):a("strong",[t._v("NT "+t._s(t._f("currency")(t.orders.total)))])])]),t.orders.final_total!==t.orders.total?a("tr",[t._m(4),a("td",{staticClass:"text-right text-danger h5"},[a("strong",[t._v("NT "+t._s(t._f("currency")(t.orders.final_total)))])])]):t._e()])])])])])]),a("form",{staticClass:"col-md-7",on:{submit:function(e){return e.preventDefault(),t.addCartOrder()}}},[t._m(5),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("usertel")},attrs:{type:"tel",name:"usertel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("usertel")?a("span",{staticClass:"text-danger"},[t._v("收件人電話不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"text-right d-flex mt-5"},[a("router-link",{staticClass:"btn btn-lg btn-secondary mr-auto",attrs:{to:"/store/customer_products"}},[t._v("取消訂單：回首頁")]),a("button",{staticClass:"btn btn-lg btn-info"},[t._v("下一步：送出訂單")])],1)])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-row mt-5"},[a("div",{staticClass:"col-sm"},[a("div",{staticClass:"alert alert-light text-center"},[a("p",{staticClass:"h3 font-weight-bold"},[t._v("STEP 1")]),t._v("確認購物清單\n      ")])]),a("div",{staticClass:"col-sm"},[a("div",{staticClass:"alert alert-success text-center"},[a("p",{staticClass:"h3 font-weight-bold"},[t._v("STEP 2")]),t._v("填寫訂單資料\n      ")])]),a("div",{staticClass:"col-sm"},[a("div",{staticClass:"alert alert-light text-center"},[a("p",{staticClass:"h3 font-weight-bold"},[t._v("STEP 3")]),t._v("完成訂單！\n      ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-link",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[a("strong",[t._v("隱藏購物車細節")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"alert-light"},[a("th",{attrs:{width:"80"}}),a("th",[t._v("商品名稱")]),a("th",{staticClass:"text-right",attrs:{width:"60"}},[t._v("數量")]),a("th",{staticClass:"text-right",attrs:{width:"130"}},[t._v("小計")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[a("strong",[t._v("總計")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-right text-danger",attrs:{colspan:"3"}},[a("strong",[t._v("折扣價")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"text-center alert-info py-3"},[a("strong",[t._v("填寫訂購人資料")])])}],i={data:function(){return{orders:[],couponCode:"",form:{user:{}},isLoading:!1,filterLoadingItem:"",isDisabled:""}},methods:{getOrders:function(){var t=this;t.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("dress_store","/cart");t.$http.get(e).then((function(e){console.log("填寫訂單資料-取得訂單",e.data),e.data.success&&(0===e.data.data.carts.length?(t.$router.push("/customer_products"),t.isLoading=!1):(t.orders=e.data.data,t.isLoading=!1))}))},addCartOrder:function(){var t=this,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("dress_store","/order");this.$validator.validate().then((function(s){s&&e.$http.post(a,{data:e.form}).then((function(a){if(console.log("填寫訂單資料-送出訂單",a.data),a.data.success){t.$bus.$emit("cartsQty:update"),e.$router.push("/store/customer_finish/".concat(a.data.orderId));var s=JSON.parse(localStorage.getItem("dressMyOrder"))||[];s.push({id:a.data.orderId}),console.log("localData",s),localStorage.setItem("dressMyOrder",JSON.stringify(s))}}))}))}},created:function(){this.getOrders()}},o=i,l=a("2877"),n=Object(l["a"])(o,s,r,!1,null,null,null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d23012c.392dce43.js.map