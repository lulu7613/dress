(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b541e10"],{"2fdb":function(t,a,e){"use strict";var s=e("5ca1"),i=e("d2c8"),r="includes";s(s.P+s.F*e("5147")(r),"String",{includes:function(t){return!!~i(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,a,e){var s=e("2b4c")("match");t.exports=function(t){var a=/./;try{"/./"[t](a)}catch(e){try{return a[s]=!1,!"/./"[t](a)}catch(i){}}return!0}},"5a38":function(t,a,e){"use strict";var s=e("8566"),i=e.n(s);i.a},6762:function(t,a,e){"use strict";var s=e("5ca1"),i=e("c366")(!0);s(s.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")("includes")},8566:function(t,a,e){},aae3:function(t,a,e){var s=e("d3f4"),i=e("2d95"),r=e("2b4c")("match");t.exports=function(t){var a;return s(t)&&(void 0!==(a=t[r])?!!a:"RegExp"==i(t))}},d2c8:function(t,a,e){var s=e("aae3"),i=e("be13");t.exports=function(t,a,e){if(s(a))throw TypeError("String#"+e+" doesn't accept regex!");return String(i(t))}},e266:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("Banner",{staticClass:"mb-5"}),e("div",{staticClass:"col-md-11 mx-auto mb-5"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2 mb-4"},[e("div",{staticClass:"nav flex-column nav-pills sticky-top"},[e("a",{staticClass:"nav-link mb-2 active my-order-type",attrs:{"data-toggle":"pill",href:"#"},on:{click:function(a){a.preventDefault(),t.type="all"}}},["all"===t.type?e("i",{staticClass:"fas fa-angle-right"}):t._e(),t._v("\n              全部訂單\n            ")]),e("a",{staticClass:"nav-link mb-2 my-order-type",attrs:{"data-toggle":"pill",href:"#"},on:{click:function(a){a.preventDefault(),t.type="paid"}}},["paid"===t.type?e("i",{staticClass:"fas fa-angle-right"}):t._e(),t._v("\n              已付款\n            ")]),e("a",{staticClass:"nav-link mb-2 my-order-type",attrs:{"data-toggle":"pill",href:"#"},on:{click:function(a){a.preventDefault(),t.type="noPaid"}}},["noPaid"===t.type?e("i",{staticClass:"fas fa-angle-right"}):t._e(),t._v("\n              未付款\n            ")]),e("div",{staticClass:"input-group mt-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",staticStyle:{border:"1px solid #4b9983"},attrs:{type:"text",placeholder:"輸入序號"},domProps:{value:t.keyword},on:{keyup:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.type=t.keyword},input:function(a){a.target.composing||(t.keyword=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){t.type=t.keyword}}},[e("i",{staticClass:"fas fa-search"})])])])])]),e("div",{staticClass:"col-md-10"},[t._m(0),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover mb-5"},[t._m(1),e("tbody",[t._l(t.filterOrder,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(t._f("date")(a.create_at)))]),e("td",[t._v(t._s(a.id))]),e("td",[t._v(t._s(a.user.name))]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.total)))]),e("td",{staticClass:"text-center"},[a.is_paid?e("strong",{staticClass:"text-success"},[t._v("已付款")]):t._e(),a.is_paid?t._e():e("span",{staticClass:"text-muted"},[t._v("未付款")]),a.is_paid?t._e():e("button",{staticClass:"btn btn-sm btn-info ml-1",on:{click:function(e){return t.goPay(a.id)}}},[t._v("付款")])]),e("td",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.openModal(a)}}},[t._v("細項")])])])})),0===t.filterOrder.length?e("tr",["noPaid"===t.type&&0===t.filterOrder.length?e("td",{attrs:{colspan:"6"}},[t._v("恭喜！您的款項都付清了。")]):t._e(),"paid"===t.type&&0===t.filterOrder.length?e("td",{attrs:{colspan:"6"}},[t._v("您的訂單都還未付款呢！")]):t._e(),t.type===t.keyword&&0===t.filterOrder.length?e("td",{attrs:{colspan:"6"}},[t._v("拍謝！搜尋不到您輸入的訂單。")]):t._e()]):t._e()],2)])]),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-primary btn-lg",on:{click:function(a){return t.goHomePage()}}},[e("i",{staticClass:"fas fa-angle-right"}),t._v("\n              回購物商城\n              "),e("i",{staticClass:"fas fa-angle-left"})])])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"orderDetialModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4"},[e("ul",{staticClass:"myOrder-list pl-2"},[e("li",{staticClass:"mb-3 d-flex d-lg-block"},[e("div",{staticClass:"text-primary font-weight-bolder"},[t._v("序號")]),e("span",{staticClass:"ml-3 ml-lg-0",staticStyle:{color:"#444444"}},[t._v(t._s(t.tempOrder.id))])]),e("li",{staticClass:"mb-3 d-flex d-lg-block"},[e("div",{staticClass:"text-primary font-weight-bolder"},[t._v("購買時間")]),e("span",{staticClass:"ml-3 ml-lg-0",staticStyle:{color:"#444444"}},[t._v(t._s(t._f("date")(t.tempOrder.create_at)))])]),t.tempOrder.user?e("li",{staticClass:"mb-3 d-flex d-lg-block"},[e("div",{staticClass:"text-primary font-weight-bolder"},[t._v("購買人")]),e("span",{staticClass:"ml-3 ml-lg-0",staticStyle:{color:"#444444"}},[t._v(t._s(t.tempOrder.user.name))])]):t._e(),e("li",{staticClass:"mb-3 d-flex d-lg-block"},[e("div",{staticClass:"text-info font-weight-bolder align-self-center"},[t._v("是否付款")]),t.tempOrder.is_paid?e("strong",{staticClass:"text-success align-self-center"},[t._v("已付款")]):t._e(),t.tempOrder.is_paid?t._e():e("span",{staticClass:"text-muted align-self-center"},[t._v("未付款")]),t.tempOrder.is_paid?t._e():e("button",{staticClass:"btn btn-sm btn-info ml-2",on:{click:function(a){return t.goPay(t.tempOrder.id)}}},[t._v("付款")])]),e("li",{staticClass:"mb-3 d-flex d-lg-block"},[e("div",{staticClass:"text-info font-weight-bolder"},[t._v("結帳金額")]),e("span",{staticClass:"ml-3 ml-lg-0",staticStyle:{color:"#444444"}},[t._v("NT "+t._s(t._f("currency")(t.tempOrder.total)))])])])]),e("div",{staticClass:"col-lg-8"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(3),e("tbody",t._l(t.tempOrder.products,(function(a){return e("tr",{key:a.id},[e("td",[e("img",{staticClass:"img-fluid",attrs:{src:a.product.imageUrl,alt:a.product.imageUrl}})]),e("td",{staticClass:"align-middle"},[t._v("\n                        "+t._s(a.product.title)+"\n                        "),a.coupon?e("div",{staticClass:"text-info"},[e("small",[t._v("已套用優惠券")])]):t._e()]),e("td",{staticClass:"align-middle text-center"},[t._v(t._s(a.qty)+"件")]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.final_total)))])])})),0)])])])])]),t._m(4)])])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h1",{staticClass:"h5 text-primary font-weight-bolder mb-3"},[e("i",{staticClass:"fas fa-columns"}),t._v("\n            我的訂單\n          ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"alert-light"},[e("th",{attrs:{width:"120"}},[t._v("購買時間")]),e("th",[t._v("序號")]),e("th",[t._v("購買人")]),e("th",{staticClass:"text-right",attrs:{width:"120"}},[t._v("結帳金額")]),e("th",{staticClass:"text-center",attrs:{width:"140"}},[t._v("是否付款")]),e("th",{staticClass:"text-right",attrs:{width:"90"}},[t._v("購買細項")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-primary text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("訂單明細")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"alert-light"},[e("th",{attrs:{width:"80"}}),e("th",[t._v("商品名稱")]),e("th",{staticClass:"text-center",attrs:{width:"60"}},[t._v("數量")]),e("th",{staticClass:"text-right",attrs:{width:"90"}},[t._v("小計")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("關閉")])])}],r=(e("6762"),e("2fdb"),e("84af")),l=e("1157"),n=e.n(l),c={components:{Banner:r["a"]},data:function(){return{myOrders:[],tempOrder:[],type:"all",keyword:"",isLoading:!1}},computed:{filterOrder:function(){var t=this,a=[];return a="all"===t.type?t.myOrders:"paid"===t.type?t.myOrders.filter((function(t){return t.is_paid})):"noPaid"===t.type?t.myOrders.filter((function(t){return!t.is_paid})):t.myOrders.filter((function(a){if(a.id===t.keyword)return!0})),a}},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this;a.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("dress_store","/orders?page=").concat(t);a.$http.get(e).then((function(t){if(console.log("我的訂單-取得訂單列表",t.data.orders),t.data.success){var e=JSON.parse(localStorage.getItem("dressMyOrder"));a.myOrders=t.data.orders.filter((function(t){return e.map((function(t){return t.id})).includes(t.id)})),a.isLoading=!1}else a.$router.push("/customer_products")}))},openModal:function(t){n()("#orderDetialModal").modal("show"),this.tempOrder=t},goPay:function(t){n()("#orderDetialModal").modal("hide"),this.$router.push("/customer_finish/".concat(t))},goHomePage:function(){this.$router.push("/customer_products"),window.scroll(0,0)}},created:function(){this.getOrders()}},o=c,d=(e("5a38"),e("2877")),u=Object(d["a"])(o,s,i,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-5b541e10.629705d2.js.map